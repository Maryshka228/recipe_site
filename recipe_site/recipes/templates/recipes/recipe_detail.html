{% extends 'recipes/base.html' %}

{% block content %}
<div class="container">
  <div class="recipe-detail" style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start;">
    <div style="
      border: 1px solid #e0e0e0;
      padding: 8px;
      border-radius: 12px;
      overflow: hidden;
      aspect-ratio: 1/1;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      background: white;
    ">
      {% if recipe.image %}
      <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" style="
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 8px;
      ">
      {% else %}
      <div style="
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
        border-radius: 8px;
      ">
        <i class="fas fa-camera" style="font-size: 3rem; color: #bdc3c7;"></i>
      </div>
      {% endif %}
    </div>

    <div style="padding: 1rem;">
      <h1 style="font-size: 2.2rem; margin-bottom: 1.5rem; color: #2c3e50; font-weight: 600;">{{ recipe.title }}</h1>

      <div style="display: flex; gap: 1.5rem; margin-bottom: 2rem; flex-wrap: wrap;">
        <span style="display: flex; align-items: center; gap: 6px; color: #7f8c8d;">
          <i class="fas fa-clock" style="color: #3498db;"></i> {{ recipe.cooking_time }} мин
        </span>
        <span style="display: flex; align-items: center; gap: 6px; color: #7f8c8d;">
          <i class="fas fa-user" style="color: #e74c3c;"></i> {{ recipe.author.username }}
        </span>
        {% if recipe.categories.all %}
        <span style="display: flex; align-items: center; gap: 6px; color: #7f8c8d;">
          <i class="fas fa-tags" style="color: #2ecc71;"></i>
          {% for category in recipe.categories.all %}
          {{ category.name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
        </span>
        {% endif %}
      </div>

      <div style="margin-bottom: 2rem;">
        <h3 style="font-size: 1.4rem; margin-bottom: 1rem; color: #34495e; font-weight: 500;">Описание</h3>
        <p style="white-space: pre-line; line-height: 1.6; color: #34495e;">{{ recipe.description }}</p>
      </div>

      <div style="margin-bottom: 2rem;">
        <h3 style="font-size: 1.4rem; margin-bottom: 1rem; color: #34495e; font-weight: 500;">Шаги приготовления</h3>
        <div style="white-space: pre-line; line-height: 1.6; color: #34495e;">{{ recipe.steps }}</div>
      </div>

      {% if user == recipe.author %}
      <div style="display: flex; gap: 1.5rem; margin-top: 3rem; flex-wrap: wrap;">
        <a href="{% url 'edit_recipe' recipe.pk %}" style="
          padding: 12px 24px;
          background: #3498db;
          color: white;
          text-decoration: none;
          border-radius: 6px;
          font-weight: 600;
          transition: all 0.3s ease;
          display: inline-flex;
          align-items: center;
          gap: 8px;
        ">
          <i class="fas fa-edit"></i> Редактировать
        </a>
        <a href="{% url 'delete_recipe' recipe.pk %}" style="
          padding: 12px 24px;
          background: #e74c3c;
          color: white;
          text-decoration: none;
          border-radius: 6px;
          font-weight: 600;
          transition: all 0.3s ease;
          display: inline-flex;
          align-items: center;
          gap: 8px;
        ">
          <i class="fas fa-trash"></i> Удалить
        </a>
      </div>
      {% endif %}

      <a href="{% url 'home' %}" style="
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-top: 3rem;
        padding: 10px 20px;
        color: #3498db;
        text-decoration: none;
        border: 1px solid #3498db;
        border-radius: 6px;
        font-weight: 500;
        transition: all 0.3s ease;
      ">
        <i class="fas fa-arrow-left"></i> На главную
      </a>
    </div>
  </div>
</div>

<style>
  a:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  .btn-primary:hover {
    background: #2980b9 !important;
  }

  .btn-danger:hover {
    background: #c0392b !important;
  }

  .btn-outline:hover {
    background: #f8f9fa !important;
  }
</style>
{% endblock %}
